
class PDVRReplacementHandler : EventHandler
{
	override void CheckReplacement(ReplaceEvent e)
	{
		if(GameInfo.GameType & GAME_Doom)
		{
			//weapon
			if(e.Replacee is "Pistol") 				e.Replacement = 'PDVR_Flintlock';
			if(e.Replacee is "RocketLauncher") 			e.Replacement = 'PDVR_Cannon';
			
			if(PDVerChecker.isPD2())
			{
				if(e.Replacee is "Chainsaw") 			e.Replacement = 'PBulletBox';
				if(e.Replacee is "Shotgun") 			e.Replacement = 'PDVR_Musket';
				if(e.Replacee is "SuperShotgun") 		e.Replacement = 'PDVR_SuperPistol';
				if(e.Replacee is "Chaingun") 			e.Replacement = 'PDVR_Repeater';
				if(e.Replacee is "PlasmaRifle") 		e.Replacement = 'PDVR_GrogSpitter';
				if(e.Replacee is "BFG9000") 			e.Replacement = 'PDVR_GrogBomb';
			}
			else
			{
				if(e.Replacee is "Chainsaw") 			e.Replacement = 'PDVR_Bomb';
				if(e.Replacee is "Shotgun") 			e.Replacement = 'PDVR_Blunderbuss';
				if(e.Replacee is "SuperShotgun") 		e.Replacement = 'PDVR_NockGun';
				if(e.Replacee is "Chaingun") 			e.Replacement = 'PDVR_DualPistol';
				if(e.Replacee is "PlasmaRifle") 		e.Replacement = 'PDVR_SwivelCannon';
				if(e.Replacee is "BFG9000") 			e.Replacement = 'PDVR_Mortar';
			}
			
			//ammo
			if(e.Replacee is "Clip") 				e.Replacement = 'PBullets';
			if(e.Replacee is "ClipBox") 				e.Replacement = 'PBulletBox';
			if(e.Replacee is "Shell") 				e.Replacement = 'PPellet';
			if(e.Replacee is "ShellBox") 				e.Replacement = 'PPelletBox';
			
			if(PDVerChecker.isPD2())
			{
				if(e.Replacee is "RocketAmmo") 			e.Replacement = 'PBallammo';
				if(e.Replacee is "RocketBox") 			e.Replacement = 'PBallsammo';
				if(e.Replacee is "Cell") 			e.Replacement = 'Grog1';
				if(e.Replacee is "CellPack") 			e.Replacement = 'Grog2';
			}
			else
			{
				if(e.Replacee is "RocketAmmo") 			e.Replacement = 'PBallsammo';
				if(e.Replacee is "RocketBox") 			e.Replacement = 'PBombammo';
				if(e.Replacee is "Cell") 			e.Replacement = 'PExplosivePile';
				if(e.Replacee is "CellPack") 			e.Replacement = 'PBigExplosivePile';
			}
			
			//projectile
			if(!PDVerChecker.isPD2())
			{
				if(e.Replacee is "BulletPuff") 			e.Replacement = 'PDPuff';
			}
			if(e.Replacee is "Plasmaball") 				e.Replacement = 'PDGrogSpit';
			if(e.Replacee is "BFGBall") 				e.Replacement = 'PDGrogBombProjectile';
		}
	}
	
	override void WorldThingSpawned(WorldEvent e)
	{
		playerinfo player = Players[ConsolePlayer];
		let pmo = player.mo;
		let spawnedThing = e.Thing;
		
		if(spawnedThing && spawnedThing is "Ammo")
		{
			string bulletClass2 = "Bullets2";
			class<Ammo> bullet2 = bulletClass2;
			
			if(spawnedThing is bullet2)
			{
				Actor.Spawn("PBullets2", spawnedThing.pos);
				spawnedThing.destroy();
				return;
			}
		}
	}
}